{"version":3,"file":"static/js/779.71a7e703.chunk.js","mappings":"iTAUMA,GAAaC,EAAAA,EAAAA,KAAS,WACxB,IAAQC,GAASC,EAAAA,EAAAA,YAAWC,EAAAA,GAApBF,KACFG,GAAYC,EAAAA,EAAAA,MAClB,GAA0BC,EAAAA,EAAAA,UAAS,IAAnC,eAAOC,EAAP,KAAcC,EAAd,KACA,GAAgCF,EAAAA,EAAAA,UAAS,IAAzC,eAAOG,EAAP,KAAiBC,EAAjB,MAEAC,EAAAA,EAAAA,YAAU,WACN,IAAMC,EAAQC,aAAaC,QAAQ,SACnCC,QAAQC,IAAIJ,GACRA,GACAR,EAAU,OAEf,IAEH,IAAMa,EAAM,yCAAG,2GACYC,EAAAA,EAAAA,KAAW,aAAc,CAAEX,MAAAA,EAAOE,SAAAA,IAD9C,OAEa,OADlBU,EADK,QAEEC,SACLC,GAASC,EAAAA,EAAAA,GAAUH,EAASI,KAAKX,OACrCX,EAAKuB,QAAQ,CACTC,GAAIJ,EAAOI,GACXC,KAAML,EAAOK,KACbnB,MAAOc,EAAOd,MACdoB,KAAMN,EAAOM,OAEjB1B,EAAK2B,WAAU,GACff,aAAagB,QAAQ,QAAS,UAAYV,EAASI,KAAKX,OACxDR,EAAU,MAZH,2CAAH,qDAgBZ,OACI,UAAC,KAAD,CAAa0B,KAAK,QAAQC,GAAG,WAAWC,QAAS,GAAIC,EAAE,OAAOC,QAAQ,OAAOC,cAAc,SAASC,WAAW,SAA/G,WACI,SAAC,KAAD,CAASC,GAAG,OAAZ,mDACA,SAAC,KAAD,CAAON,GAAG,WAAWO,EAAE,MAAMD,GAAG,OAAOE,KAAK,QAAQC,YAAY,QAAQC,MAAOlC,EAAOmC,SAAU,SAACC,GAAD,OAAOnC,EAASmC,EAAEC,OAAOH,WACzH,SAAC,KAAD,CAAOV,GAAG,WAAWO,EAAE,MAAMD,GAAG,OAAOE,KAAK,WAAWC,YAAY,uCAASC,MAAOhC,EAAUiC,SAAU,SAACC,GAAD,OAAOjC,EAAYiC,EAAEC,OAAOH,WACnI,SAAC,KAAD,CAAQH,EAAE,MAAMD,GAAG,OAAOQ,YAAY,OAAOC,QAAS7B,EAAtD,mDACA,SAAC,KAAD,CAAM8B,GAAIC,EAAAA,GAAV,gFAKZ,I,UCxCA,GANehD,EAAAA,EAAAA,KAAS,WACpB,OAAO,gBAAKyB,GAAIwB,EAAAA,EAAAA,QAAT,UACH,SAACC,EAAD,U,qCCLFC,E,MAAWjC,GAAAA,OAAa,CAC5BkC,QAAS,6BACTC,QAAS,CACP,wBAAiBxC,aAAaC,QAAQ,gBAAtC,QAAkD,MAItDqC,EAASG,aAAanC,SAASoC,KAC7B,SAAAC,GAAG,OAAIA,KACP,SAAAC,GAIE,OAH8B,MAA1BA,EAAMtC,SAASC,QACjBP,aAAa6C,WAAW,SAEnBC,QAAQC,OAAOH,MAI1B,O,mBClBA,KAAgB,QAAU","sources":["components/AuthForms/SignIn.js","pages/auth/SignIn.js","utils/axios.js","webpack://client/./src/pages/auth/Auth.module.scss?a5aa"],"sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\r\nimport { Context } from \"../../index\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from '../../utils/axios';\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { SIGN_UP } from \"../../routes/const\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button, Input, Heading, FormControl } from \"@chakra-ui/react\";\r\nimport jwtDecode from \"jwt-decode\";\r\n\r\nconst SignInForm = observer(() => {\r\n    const { user } = useContext(Context);\r\n    const navigator = useNavigate();\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem(\"Token\");\r\n        console.log(token);\r\n        if (token) {\r\n            navigator('/')\r\n        }\r\n    }, []);\r\n\r\n    const submit = async () => {\r\n        const response = await axios.post('user/login', { email, password });\r\n        if (response.status === 200) {\r\n            var decode = jwtDecode(response.data.token)\r\n            user.setUser({\r\n                id: decode.id,\r\n                name: decode.name,\r\n                email: decode.email,\r\n                role: decode.role\r\n            })\r\n            user.setIsAuth(true)\r\n            localStorage.setItem(\"Token\", \"Bearer \" + response.data.token);\r\n            navigator('/');\r\n        };\r\n    }\r\n\r\n    return (\r\n        <FormControl maxW='500px' bg='gray.200' rounded={10} p=\"20px\" display='flex' flexDirection=\"column\" alignItems=\"center\">\r\n            <Heading my=\"20px\">Увійти</Heading>\r\n            <Input bg='gray.100' w=\"80%\" my=\"10px\" type='email' placeholder=\"Email\" value={email} onChange={(e) => setEmail(e.target.value)} />\r\n            <Input bg='gray.100' w=\"80%\" my=\"10px\" type='password' placeholder=\"Пароль\" value={password} onChange={(e) => setPassword(e.target.value)} />\r\n            <Button w=\"80%\" my=\"10px\" colorScheme=\"teal\" onClick={submit}>Увійти</Button>\r\n            <Link to={SIGN_UP}>Реєстрація</Link>\r\n        </FormControl>\r\n    );\r\n})\r\n\r\nexport default SignInForm;\r\n","import React from \"react\";\r\nimport SignInForm from \"../../components/AuthForms/SignIn\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport styles from \"./Auth.module.scss\";\r\n\r\nconst SignUp = observer(() => {\r\n    return <div id={styles.wrapper}>\r\n        <SignInForm />\r\n    </div>;\r\n});\r\n\r\nexport default SignUp;\r\n","import axios from \"axios\";\r\n\r\nconst instance = axios.create({\r\n  baseURL: \"http://localhost:8000/api/\",\r\n  headers: {\r\n    'Authorization': localStorage.getItem(\"Token\") ?? \"\"\r\n  }\r\n});\r\n\r\ninstance.interceptors.response.use(\r\n  res => res,\r\n  error => {\r\n    if (error.response.status === 401) {\r\n      localStorage.removeItem(\"Token\");\r\n    };\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default instance;","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Auth_wrapper__Od48h\"};"],"names":["SignInForm","observer","user","useContext","Context","navigator","useNavigate","useState","email","setEmail","password","setPassword","useEffect","token","localStorage","getItem","console","log","submit","axios","response","status","decode","jwtDecode","data","setUser","id","name","role","setIsAuth","setItem","maxW","bg","rounded","p","display","flexDirection","alignItems","my","w","type","placeholder","value","onChange","e","target","colorScheme","onClick","to","SIGN_UP","styles","SignIn","instance","baseURL","headers","interceptors","use","res","error","removeItem","Promise","reject"],"sourceRoot":""}