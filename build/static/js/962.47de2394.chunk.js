"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[962],{8962:function(e,r,s){s.r(r),s.d(r,{default:function(){return S}});var n=s(2791),a=s(1413),o=s(4165),i=s(5861),t=s(2966),l=s(6871),d=s(9731),u=s(32),c=s(4045),p=s(3504),m=s(8735),x=s(3393),v=s(5798),h=s(2504),f=s(456),g=s(776),w=g.Ry().shape({email:g.Z_().email().required("Email is invalid").max(20),password:g.Z_().required("Password have to be from 6 to 16 characters").min(4).max(16)}),I=s(9195),k=s(1265),j=s(184),y=(0,u.Pi)((function(){var e,r,s,u,g,y,Z=(0,n.useContext)(t._).user,b=(0,l.s0)(),S=(0,I.cI)({resolver:(0,k.X)(w)}),_=S.register,A=S.handleSubmit,C=S.formState.errors;(0,n.useEffect)((function(){var e=localStorage.getItem("Token");console.log(e),e&&b("/")}),[]);var P=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(r){var s,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return e.next=3,d.Z.post("user/login",{email:r.email,password:r.password});case 3:200===(s=e.sent).status&&(n=(0,f.Z)(s.data.token),Z.setUser({id:n.id,name:n.name,email:n.email,role:n.role}),"admin"===Z.user.role&&Z.setIsAdmin(!0),Z.setIsAuth(!0),localStorage.setItem("Token","Bearer "+s.data.token),b("/"));case 6:window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,j.jsxs)(m.xu,{w:"500px",bg:"gray.100",rounded:10,p:"20px",display:"flex",flexDirection:"column",alignItems:"center",children:[(0,j.jsx)(m.X6,{my:"20px",children:"\u0423\u0432\u0456\u0439\u0442\u0438"}),(0,j.jsxs)(x.NI,{my:"10px",px:"40px",isInvalid:!(null===C||void 0===C||null===(e=C.email)||void 0===e||!e.message),errortext:null===C||void 0===C||null===(r=C.email)||void 0===r?void 0:r.message,children:[(0,j.jsx)(v.II,(0,a.Z)({bg:"gray.100",type:"email",placeholder:"Email"},_("email"))),(0,j.jsx)(x.J1,{children:null===C||void 0===C||null===(s=C.email)||void 0===s?void 0:s.message})]}),(0,j.jsxs)(x.NI,{my:"10px",px:"40px",isInvalid:!(null===C||void 0===C||null===(u=C.password)||void 0===u||!u.message),errortext:null===C||void 0===C||null===(g=C.password)||void 0===g?void 0:g.message,children:[(0,j.jsx)(v.II,(0,a.Z)({bg:"gray.100",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"},_("password"))),(0,j.jsx)(x.J1,{children:null===C||void 0===C||null===(y=C.password)||void 0===y?void 0:y.message})]}),(0,j.jsx)(h.zx,{w:"80%",my:"10px",colorScheme:"teal",onClick:A(P),children:"\u0423\u0432\u0456\u0439\u0442\u0438"}),(0,j.jsx)(p.rU,{to:c._5,children:"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f"})]})})),Z=y,b=s(7503),S=(0,u.Pi)((function(){return(0,j.jsx)("div",{id:b.Z.wrapper,children:(0,j.jsx)(Z,{})})}))},9731:function(e,r,s){var n,a=s(4569),o=s.n(a)().create({baseURL:"https://mydiplomlevas.herokuapp.com/api/",headers:{Authorization:null!==(n=localStorage.getItem("Token"))&&void 0!==n?n:""}});o.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&localStorage.removeItem("Token"),Promise.reject(e)})),r.Z=o},7503:function(e,r){r.Z={wrapper:"Auth_wrapper__Od48h"}}}]);
//# sourceMappingURL=962.47de2394.chunk.js.map