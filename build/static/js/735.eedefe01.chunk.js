"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[735],{5136:function(e,n,t){t.r(n);var r=t(4165),c=t(5861),i=t(885),s=t(2791),o=t(7109),u=t(8735),a=t(3046),p=t(5154),l=t(2504),x=t(5272),d=t(32),f=t(9731),h=t(184),g=(0,d.Pi)((function(){var e=(0,s.useContext)(o._).user,n=(0,s.useState)([]),t=(0,i.Z)(n,2),d=t[0],g=t[1],m=(0,s.useState)(0),j=(0,i.Z)(m,2),k=j[0],C=j[1];function v(){return(v=(0,c.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.get("basket/get");case 2:200===(n=e.sent).status&&(g(n.data),t=n.data.reduce((function(e,n){return e+n.price*n.count}),0),C(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=(0,c.Z)((0,r.Z)().mark((function e(n){var t,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.id,c=n.itemPrice,e.next=3,f.Z.delete("basket/".concat(t));case 3:200===e.sent.status&&(g(d.filter((function(e){return e.id!==t}))),C(k-c));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=(0,c.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.Z.post("user/createOrder",{userId:e.user.id,basket:d,price:k});case 2:200===n.sent.status&&(g([]),C(0));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,s.useEffect)((function(){!function(){v.apply(this,arguments)}()}),[]),(0,h.jsx)(u.W2,{maxWidth:1080,paddingBottom:"200px",children:d.length?(0,h.jsxs)(u.gC,{children:[d.map((function(e,n){return(0,h.jsxs)(u.kC,{w:"100%",h:"150px",rounded:10,bg:"gray.100",m:4,p:"15px 20px 15px 20px",justifyContent:"space-between",children:[(0,h.jsxs)(u.kC,{children:[(0,h.jsx)(a.Ee,{h:"100%",w:"auto",rounded:5,src:e.image}),(0,h.jsxs)(u.kC,{mx:4,my:1,flexDirection:"column",justifyContent:"space-between",children:[(0,h.jsx)(u.xv,{fontSize:"30px",color:"gray.800",lineHeight:"30px",children:e.name}),(0,h.jsxs)(p.Y2,{defaultValue:e.count,min:1,w:"100px",bg:"gray.100",rounded:2,onChange:function(n){e.count=n,function(){var e=d.reduce((function(e,n){return e+n.price*n.count}),0);C(e)}()},children:[(0,h.jsx)(p.zu,{}),(0,h.jsxs)(p.Fi,{children:[(0,h.jsx)(p.WQ,{}),(0,h.jsx)(p.Y_,{})]})]})]})]}),(0,h.jsxs)(u.kC,{flexDir:"column",justifyContent:"space-between",alignItems:"flex-end",children:[(0,h.jsx)(l.zx,{w:"40px",h:"40px",colorScheme:"red",onClick:function(){return function(e){return w.apply(this,arguments)}({id:e.id,itemPrice:e.price*e.count})},children:(0,h.jsx)(x.pJ,{})}),(0,h.jsxs)(u.xv,{mx:4,fontSize:"30px",m:"0",color:"gray.600",children:[e.price,"\u20b4"]})]})]},n)})),(0,h.jsxs)(u.kC,{alignItems:"center",alignSelf:"end",borderWidth:"2px",borderColor:"green.300",rounded:5,bg:"green.100",p:"20px",children:[(0,h.jsxs)(u.xv,{fontSize:"30px",marginRight:"30px",color:"gray.600",children:[k,"\u20b4"]}),(0,h.jsx)(l.zx,{colorScheme:"green",onClick:function(){return y.apply(this,arguments)},children:"\u041a\u0443\u043f\u0438\u0442\u0438"})]})]}):(0,h.jsx)(u.xu,{position:"fixed",top:"50%",left:"calc(50% - 30px)",children:(0,h.jsx)(u.xv,{fontSize:"40px",children:"\u041f\u0443\u0441\u0442\u043e"})})})}));n.default=g},9731:function(e,n,t){var r,c=t(4569),i=t.n(c)().create({baseURL:"http://localhost:8000/api/",headers:{Authorization:null!==(r=localStorage.getItem("Token"))&&void 0!==r?r:""}});i.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&localStorage.removeItem("Token"),Promise.reject(e)})),n.Z=i}}]);
//# sourceMappingURL=735.eedefe01.chunk.js.map